{"ast":null,"code":"import { tap, catchError } from 'rxjs/operators';\nimport { of } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/authentication/auth.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"src/app/services/resources/local.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/forms\";\nfunction AppSideLoginComponent_div_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 28);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r0.errorMessage);\n  }\n}\nexport class AppSideLoginComponent {\n  constructor(authService, router, localIdService) {\n    this.authService = authService;\n    this.router = router;\n    this.localIdService = localIdService;\n    this.acceso = false;\n  }\n  onSubmit() {\n    this.authService.login(this.usuarioId, this.clave, 1, this.localId, \"\", this.usuarioId).pipe(tap(response => {\n      const token = response.result;\n      this.authService.setToken(token);\n      this.localIdService.setLocalId(response.agencia.id);\n      this.router.navigate(['/saldo-inventario']);\n    }), catchError(error => {\n      this.errorMessage = 'Las credenciales son incorrectas. Por favor, intenta nuevamente.';\n      return of(null);\n    })).subscribe();\n  }\n}\nAppSideLoginComponent.ɵfac = function AppSideLoginComponent_Factory(t) {\n  return new (t || AppSideLoginComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.LocalIdService));\n};\nAppSideLoginComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: AppSideLoginComponent,\n  selectors: [[\"app-login\"]],\n  decls: 40,\n  vars: 4,\n  consts: [[\"lang\", \"en\"], [\"charset\", \"utf-8\"], [\"name\", \"viewport\", \"content\", \"width=device-width, initial-scale=1\"], [\"href\", \"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css\", \"rel\", \"stylesheet\", \"integrity\", \"sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM\", \"crossorigin\", \"anonymous\"], [1, \"vh-100\", 2, \"background-color\", \"#F1F4F6\"], [1, \"container\", \"py-5\", \"h-100\"], [1, \"row\", \"d-flex\", \"justify-content-center\", \"align-items-center\", \"h-100\"], [1, \"col\", \"col-xl-10\"], [1, \"card\", 2, \"border-radius\", \"1rem\"], [1, \"row\", \"g-1\"], [1, \"col-md-7\", \"col-lg-5\", \"p-3\", \"p-lg-5\", \"d-flex\", \"align-items-center\"], [\"src\", \"assets\\\\images\\\\saia-logo.png\", \"alt\", \"saia-logo\", 1, \"img-fluid\"], [1, \"col-md-5\", \"col-lg-7\", \"d-flex\", \"align-items-center\"], [1, \"card-body\", \"p-4\", \"p-lg-5\", \"text-black\"], [\"action\", \"/login\", \"method\", \"post\"], [1, \"d-flex\", \"align-items-center\", \"mb-3\", \"pb-1\"], [1, \"h1\", \"fw-bold\", \"mb-0\"], [\"class\", \"error-message\", 4, \"ngIf\"], [1, \"form-outline\", \"mb-4\"], [\"for\", \"usuarioId\", \"for\", \"user\", 1, \"form-label\"], [\"type\", \"text\", \"name\", \"usuarioId\", \"id\", \"user\", \"required\", \"required\", 1, \"form-control\", \"form-control-sm\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"clave\", \"for\", \"pass\", 1, \"form-label\"], [\"type\", \"password\", \"id\", \"pass\", \"name\", \"clave\", \"required\", \"required\", 1, \"form-control\", \"form-control-sm\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"localId\", \"for\", \"local\", 1, \"form-label\"], [\"name\", \"localId\", \"id\", \"local\", \"type\", \"text\", \"required\", \"required\", 1, \"form-control\", \"form-control-sm\", 3, \"ngModel\", \"ngModelChange\"], [1, \"pt-1\", \"mb-4\", \"d-flex\", \"justify-content-between\"], [\"type\", \"submit\", \"id\", \"loginbutton\", 1, \"btn\", \"btn-outline-success\", \"btn-lg\", \"btn-block\", 3, \"click\"], [\"href\", \"#!\", 1, \"small\", \"text-muted\"], [1, \"error-message\"]],\n  template: function AppSideLoginComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"html\", 0)(1, \"head\");\n      i0.ɵɵelement(2, \"meta\", 1)(3, \"meta\", 2);\n      i0.ɵɵelementStart(4, \"title\");\n      i0.ɵɵtext(5, \"Login\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(6, \"link\", 3);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(7, \"body\")(8, \"section\", 4)(9, \"div\", 5)(10, \"div\", 6)(11, \"div\", 7)(12, \"div\", 8)(13, \"div\", 9)(14, \"div\", 10);\n      i0.ɵɵelement(15, \"img\", 11);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(16, \"div\", 12)(17, \"div\", 13)(18, \"form\", 14)(19, \"div\", 15)(20, \"span\", 16);\n      i0.ɵɵtext(21, \"Iniciar Sesi\\u00F3n\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtemplate(22, AppSideLoginComponent_div_22_Template, 2, 1, \"div\", 17);\n      i0.ɵɵelementStart(23, \"div\", 18)(24, \"label\", 19);\n      i0.ɵɵtext(25, \"Username\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(26, \"input\", 20);\n      i0.ɵɵlistener(\"ngModelChange\", function AppSideLoginComponent_Template_input_ngModelChange_26_listener($event) {\n        return ctx.usuarioId = $event;\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(27, \"div\", 18)(28, \"label\", 21);\n      i0.ɵɵtext(29, \"Password\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(30, \"input\", 22);\n      i0.ɵɵlistener(\"ngModelChange\", function AppSideLoginComponent_Template_input_ngModelChange_30_listener($event) {\n        return ctx.clave = $event;\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(31, \"div\", 18)(32, \"label\", 23);\n      i0.ɵɵtext(33, \"Local\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(34, \"input\", 24);\n      i0.ɵɵlistener(\"ngModelChange\", function AppSideLoginComponent_Template_input_ngModelChange_34_listener($event) {\n        return ctx.localId = $event;\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(35, \"div\", 25)(36, \"button\", 26);\n      i0.ɵɵlistener(\"click\", function AppSideLoginComponent_Template_button_click_36_listener() {\n        return ctx.onSubmit();\n      });\n      i0.ɵɵtext(37, \"Aceptar\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(38, \"a\", 27);\n      i0.ɵɵtext(39, \"Recuperar contrase\\u00F1a\");\n      i0.ɵɵelementEnd()()()()()()()()()()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(22);\n      i0.ɵɵproperty(\"ngIf\", ctx.errorMessage);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngModel\", ctx.usuarioId);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngModel\", ctx.clave);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngModel\", ctx.localId);\n    }\n  },\n  dependencies: [i4.NgIf, i5.ɵNgNoValidate, i5.DefaultValueAccessor, i5.NgControlStatus, i5.NgControlStatusGroup, i5.RequiredValidator, i5.NgModel, i5.NgForm],\n  encapsulation: 2\n});","map":{"version":3,"mappings":"AAEA,SAASA,GAAG,EAAEC,UAAU,QAAQ,gBAAgB;AAIhD,SAASC,EAAE,QAAQ,MAAM;;;;;;;;;ICuBeC,+BAAgD;IAAAA,YAAkB;IAAAA,iBAAM;;;;IAAxBA,eAAkB;IAAlBA,yCAAkB;;;ADlB1G,OAAM,MAAOC,qBAAqB;EAUhCC,YAAoBC,WAAwB,EAAUC,MAAc,EAASC,cAA8B;IAAvF,gBAAW,GAAXF,WAAW;IAAuB,WAAM,GAANC,MAAM;IAAiB,mBAAc,GAAdC,cAAc;IAD3F,WAAM,GAAY,KAAK;EACwF;EAG/GC,QAAQ;IACN,IAAI,CAACH,WAAW,CAACI,KAAK,CAAC,IAAI,CAACC,SAAS,EAAE,IAAI,CAACC,KAAK,EAAC,CAAC,EAAC,IAAI,CAACC,OAAO,EAAC,EAAE,EAAC,IAAI,CAACF,SAAS,CAAC,CAChFG,IAAI,CACHd,GAAG,CAAEe,QAAQ,IAAI;MACf,MAAMC,KAAK,GAAGD,QAAQ,CAACE,MAAM;MAC7B,IAAI,CAACX,WAAW,CAACY,QAAQ,CAACF,KAAK,CAAC;MAChC,IAAI,CAACR,cAAc,CAACW,UAAU,CAACJ,QAAQ,CAACK,OAAO,CAACC,EAAE,CAAC;MACnD,IAAI,CAACd,MAAM,CAACe,QAAQ,CAAC,CAAC,mBAAmB,CAAC,CAAC;IAE7C,CAAC,CAAC,EACFrB,UAAU,CAACsB,KAAK,IAAG;MACjB,IAAI,CAACC,YAAY,GAAG,kEAAkE;MACtF,OAAOtB,EAAE,CAAC,IAAI,CAAC;IACjB,CAAC,CAAC,CAEH,CACAuB,SAAS,EAAE;EAChB;;AA9BWrB,qBAAqB;mBAArBA,qBAAqB;AAAA;AAArBA,qBAAqB;QAArBA,qBAAqB;EAAAsB;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MCVlC3B,+BAAgB;MAGZA,0BAAsB;MAEtBA,6BAAO;MAAAA,qBAAK;MAAAA,iBAAQ;MACpBA,0BACgH;MACpHA,iBAAO;MAEPA,4BAAM;MAQ0BA,2BAA2E;MAE/EA,iBAAM;MACNA,gCAAyD;MAKXA,oCAAc;MAAAA,iBAAO;MAEvDA,yEAAwE;MAExEA,gCAA+B;MAC0BA,yBAAQ;MAAAA,iBAAQ;MACrEA,kCACsF;MAAzBA;QAAA;MAAA,EAAuB;MADpFA,iBACsF;MAG1FA,gCAA+B;MACsBA,yBAAQ;MAAAA,iBAAQ;MACjEA,kCACkF;MAArBA;QAAA;MAAA,EAAmB;MADhFA,iBACkF;MAGtFA,gCAA+B;MACyBA,sBAAK;MAAAA,iBAAQ;MACjEA,kCAC2D;MAAtBA;QAAA;MAAA,EAAqB;MAD1DA,iBAC2D;MAI/DA,gCAAsD;MAC1CA;QAAA,OAAS4B,cAAU;MAAA,EAAC;MACO5B,wBAAO;MAAAA,iBAAS;MAIvDA,8BAAsC;MAAAA,0CAAoB;MAAAA,iBAAI;;;MA3BxDA,gBAAkB;MAAlBA,uCAAkB;MAKyCA,eAAuB;MAAvBA,uCAAuB;MAMvBA,eAAmB;MAAnBA,mCAAmB;MAM3CA,eAAqB;MAArBA,qCAAqB","names":["tap","catchError","of","i0","AppSideLoginComponent","constructor","authService","router","localIdService","onSubmit","login","usuarioId","clave","localId","pipe","response","token","result","setToken","setLocalId","agencia","id","navigate","error","errorMessage","subscribe","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\CAELOS JR 2018\\Documents\\Proyecto StockTaking\\Stocktaking-G2\\Cliente\\src\\app\\pages\\authentication\\login\\login.component.ts","C:\\Users\\CAELOS JR 2018\\Documents\\Proyecto StockTaking\\Stocktaking-G2\\Cliente\\src\\app\\pages\\authentication\\login\\login.component.html"],"sourcesContent":["import { Component } from '@angular/core';\r\nimport { AuthService } from 'src/app/services/authentication/auth.service';\r\nimport { tap, catchError } from 'rxjs/operators';\r\nimport { Router } from '@angular/router';\r\nimport { LocalIdService } from 'src/app/services/resources/local.service';\r\n\r\nimport { of } from 'rxjs';\r\n@Component({\r\n  selector: 'app-login',\r\n  templateUrl: './login.component.html',\r\n})\r\nexport class AppSideLoginComponent {\r\n  errorMessage: string;\r\n  isAuthenticated: boolean ;\r\n  usuarioId: string\r\n  clave: string; \r\n  empresaId:1;\r\n  localId:number;\r\n  equipoIP:\"\";\r\n  equipoNombre:string;\r\n  acceso: boolean = false;\r\n  constructor(private authService: AuthService, private router: Router,private localIdService: LocalIdService) { }\r\n\r\n\r\n  onSubmit(): void {\r\n    this.authService.login(this.usuarioId, this.clave,1,this.localId,\"\",this.usuarioId)\r\n      .pipe(\r\n        tap((response) => {\r\n          const token = response.result; \r\n          this.authService.setToken(token);\r\n          this.localIdService.setLocalId(response.agencia.id);\r\n          this.router.navigate(['/saldo-inventario']);\r\n\r\n        }),\r\n        catchError(error => {\r\n          this.errorMessage = 'Las credenciales son incorrectas. Por favor, intenta nuevamente.';\r\n          return of(null);\r\n        })\r\n        \r\n      )\r\n      .subscribe();\r\n  }\r\n}\r\n","<!DOCTYPE html>\r\n<html lang=\"en\">\r\n\r\n<head>\r\n    <meta charset=\"utf-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\r\n    <title>Login</title>\r\n    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css\" rel=\"stylesheet\"\r\n        integrity=\"sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM\" crossorigin=\"anonymous\">\r\n</head>\r\n\r\n<body>\r\n    <section class=\"vh-100\" style=\"background-color: #F1F4F6;\">\r\n        <div class=\"container py-5 h-100\">\r\n            <div class=\"row d-flex justify-content-center align-items-center h-100\">\r\n                <div class=\"col col-xl-10\">\r\n                    <div class=\"card\" style=\"border-radius: 1rem;\">\r\n                        <div class=\"row g-1\">\r\n                            <div class=\"col-md-7 col-lg-5 p-3 p-lg-5 d-flex align-items-center\">\r\n                                <img src=\"assets\\images\\saia-logo.png\" alt=\"saia-logo\" class=\"img-fluid\" />\r\n\r\n                            </div>\r\n                            <div class=\"col-md-5 col-lg-7 d-flex align-items-center\">\r\n                                <div class=\"card-body p-4 p-lg-5 text-black\">\r\n\r\n                                    <form action=\"/login\" method=\"post\">\r\n                                        <div class=\"d-flex align-items-center mb-3 pb-1\">\r\n                                            <span class=\"h1 fw-bold mb-0\">Iniciar Sesión</span>\r\n                                        </div>\r\n                                        <div *ngIf=\"errorMessage\" class=\"error-message\">{{ errorMessage }}</div>\r\n\r\n                                        <div class=\"form-outline mb-4\">\r\n                                            <label for=\"usuarioId\" class=\"form-label\" for=\"user\">Username</label>\r\n                                            <input type=\"text\" name=\"usuarioId\" id=\"user\"\r\n                                                class=\"form-control form-control-sm\" required=\"required\" [(ngModel)]=\"usuarioId\"/>\r\n                                        </div>\r\n\r\n                                        <div class=\"form-outline mb-4\">\r\n                                            <label for=\"clave\" class=\"form-label\" for=\"pass\">Password</label>\r\n                                            <input type=\"password\" id=\"pass\" name=\"clave\"\r\n                                                class=\"form-control form-control-sm\" required=\"required\" [(ngModel)]=\"clave\"/>\r\n                                        </div>\r\n\r\n                                        <div class=\"form-outline mb-4\">\r\n                                            <label for=\"localId\" class=\"form-label\" for=\"local\">Local</label>\r\n                                            <input class=\"form-control form-control-sm\" name=\"localId\" id=\"local\"\r\n                                                type=\"text\" required=\"required\"  [(ngModel)]=\"localId\">\r\n                                        </div>\r\n\r\n\r\n                                        <div class=\"pt-1 mb-4 d-flex justify-content-between\">\r\n                                            <button (click)=\"onSubmit()\" class=\"btn btn-outline-success btn-lg btn-block\"\r\n                                                type=\"submit\" id=\"loginbutton\">Aceptar</button>\r\n                                        </div>\r\n\r\n\r\n                                        <a class=\"small text-muted\" href=\"#!\">Recuperar contraseña</a>\r\n\r\n\r\n                                    </form>\r\n\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </section>\r\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js\"\r\n        integrity=\"sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz\"\r\n        crossorigin=\"anonymous\"></script>\r\n</body>\r\n\r\n</html>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}